#!/bin/env node
const{readFileSync:readFileSync}=require("fs"),{execSync:execSync}=require("child_process"),getCpuUsageInfo=()=>{let e,c,r,n=0,o=0,a=0;for(let e=0;e<execSync("nproc");e++){const c=`/sys/devices/system/cpu/cpu${e}/cpufreq`;n+=Number(readFileSync(`${c}/scaling_min_freq`)),o+=Number(readFileSync(`${c}/scaling_cur_freq`)),a+=Number(readFileSync(`${c}/scaling_max_freq`))}return e=o-n,r=a-n,(c=Math.floor(e/r*100))<10&&(c=` ${c}`),`${c}%`},getMemInfo=()=>{const e=readFileSync("/proc/meminfo").toString(),c=e.match(/MemTotal.+?(\d+)/i)[1],r=c-e.match(/MemAvailable.+?(\d+)/i)[1];return`${Math.floor(r/1024)}MB/${Math.floor(c/1024)}MB`};console.log(`${getMemInfo()} ${getCpuUsageInfo()}`);
